/*
 * @name        easyzoom
 * @author       <>
 * @modified    Thursday, November 22nd, 2018
 * @version     2.5.2
 */
!function(b,a){"function"==typeof define&&define.amd?define(["jquery"],function(c){a(c)}):"object"==typeof module&&module.exports?module.exports=b.EasyZoom=a(require("jquery")):b.EasyZoom=a(b.jQuery)}(this,function(g){var a,b,h,k,n,e,j={loadingNotice:"Loading image",errorNotice:"The image could not be loaded",errorDuration:2500,linkAttribute:"href",preventClicks:!0,beforeShow:g.noop,beforeHide:g.noop,onShow:g.noop,onHide:g.noop,onMove:g.noop};function m(d,c){this.$target=g(d),this.opts=g.extend({},j,c,this.$target.data()),void 0===this.isOpen&&this._init()}return m.prototype._init=function(){this.$link=this.$target.find("a"),this.$image=this.$target.find("img"),this.$flyout=g('<div class="easyzoom-flyout" />'),this.$notice=g('<div class="easyzoom-notice" />'),this.$target.on({"mousemove.easyzoom touchmove.easyzoom":g.proxy(this._onMove,this),"mouseleave.easyzoom touchend.easyzoom":g.proxy(this._onLeave,this),"mouseenter.easyzoom touchstart.easyzoom":g.proxy(this._onEnter,this)}),this.opts.preventClicks&&this.$target.on("click.easyzoom",function(c){c.preventDefault()})},m.prototype.show=function(w,d){var q=this;if(!1!==this.opts.beforeShow.call(this)){if(!this.isReady){return this._loadImage(this.$link.attr(this.opts.linkAttribute),function(){!q.isMouseOver&&d||q.show(w)})}this.$target.append(this.$flyout);var l=this.$target.outerWidth(),v=this.$target.outerHeight(),f=this.$flyout.width(),p=this.$flyout.height(),c=this.$zoom.width(),u=this.$zoom.height();(a=c-f)<0&&(a=0),(b=u-p)<0&&(b=0),h=a/l,k=b/v,this.isOpen=!0,this.opts.onShow.call(this),w&&this._move(w)}},m.prototype._onEnter=function(d){var c=d.originalEvent.touches;this.isMouseOver=!0,c&&1!=c.length||(d.preventDefault(),this.show(d,!0))},m.prototype._onMove=function(c){this.isOpen&&(c.preventDefault(),this._move(c))},m.prototype._onLeave=function(){this.isMouseOver=!1,this.isOpen&&this.hide()},m.prototype._onLoad=function(c){c.currentTarget.width&&(this.isReady=!0,this.$notice.detach(),this.$flyout.html(this.$zoom),this.$target.removeClass("is-loading").addClass("is-ready"),c.data.call&&c.data())},m.prototype._onError=function(){var c=this;this.$notice.text(this.opts.errorNotice),this.$target.removeClass("is-loading").addClass("is-error"),this.detachNotice=setTimeout(function(){c.$notice.detach(),c.detachNotice=null},this.opts.errorDuration)},m.prototype._loadImage=function(f,c){var d=new Image;this.$target.addClass("is-loading").append(this.$notice.text(this.opts.loadingNotice)),this.$zoom=g(d).on("error",g.proxy(this._onError,this)).on("load",c,g.proxy(this._onLoad,this)),d.style.position="absolute",d.src=f},m.prototype._move=function(w){if(0===w.type.indexOf("touch")){var d=w.touches||w.originalEvent.touches;n=d[0].pageX,e=d[0].pageY}else{n=w.pageX||n,e=w.pageY||e}var q=this.$target.offset(),l=e-q.top,v=n-q.left,f=Math.ceil(l*k),p=Math.ceil(v*h);if(p<0||f<0||a<p||b<f){this.hide()}else{var c=-1*f,u=-1*p;this.$zoom.css({top:c,left:u}),this.opts.onMove.call(this,c,u)}},m.prototype.hide=function(){this.isOpen&&!1!==this.opts.beforeHide.call(this)&&(this.$flyout.detach(),this.isOpen=!1,this.opts.onHide.call(this))},m.prototype.swap=function(f,c,d){this.hide(),this.isReady=!1,this.detachNotice&&clearTimeout(this.detachNotice),this.$notice.parent().length&&this.$notice.detach(),this.$target.removeClass("is-loading is-ready is-error"),this.$image.attr({src:f,srcset:g.isArray(d)?d.join():d}),this.$link.attr(this.opts.linkAttribute,c)},m.prototype.teardown=function(){this.hide(),this.$target.off(".easyzoom").removeClass("is-loading is-ready is-error"),this.detachNotice&&clearTimeout(this.detachNotice),delete this.$link,delete this.$zoom,delete this.$image,delete this.$notice,delete this.$flyout,delete this.isOpen,delete this.isReady},g.fn.easyZoom=function(c){return this.each(function(){var d=g.data(this,"easyZoom");d?void 0===d.isOpen&&d._init():g.data(this,"easyZoom",new m(this,c))})},m});